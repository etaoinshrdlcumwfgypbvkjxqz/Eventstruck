//////////////////////////////////////////////////
// TITLE Collections
//////////////////////////////////////////////////


/* SECTION methods */

project.ext.stringToStringList = { String s -> s == '[]' ? [] : s.substring(1, s.length() - 1).split('(?<!\\\\),', 0).collect { it.trim().replace '\\,', ',' } }

project.ext.stringToStringMap = { String s ->
    Map<String, List<String>> r = [:]
    (s == '[:]' ? [] : stringToStringList.call(s)).each {
        List<String> e = it.trim().split('(?<!\\\\):', 2).collect { it.trim().replace('\\:', ':') }
        if (r.containsKey(e.first())) r[e.first()] << e.last()
        else r[e.first()] = [e.last()]
    }
    r
}
