//////////////////////////////////////////////////
// TITLE I/O
//////////////////////////////////////////////////

import java.nio.channels.Channels

project.ext.createNewFile = { File f ->
    f.parentFile.mkdirs()
    f.createNewFile()
}

project.ext.createNewFileFromPath = { String s ->
    File f = file s
    createNewFile.call f
    f
}

project.ext.download = { String url, File dest ->
    createNewFile.call dest
    FileOutputStream fos = new FileOutputStream(dest)
    long r = 0
    try {
        r = fos.channel.transferFrom(Channels.newChannel(new URL(url).openStream()), 0, Long.MAX_VALUE)
    } finally {
        fos.close()
    }
    r
}

project.ext.convertToCanonicalPath = { String p ->
    file(p).canonicalPath
}
