//////////////////////////////////////////////////
// TITLE Mod
//////////////////////////////////////////////////

archivesBaseName = rootProject.name

minecraft {
	// Default run configurations.
	// These can be tweaked, removed, or duplicated as needed.
	runs {
		//noinspection SpellCheckingInspection
		client {
			workingDirectory file(minecraftRunDir)
			if (project != rootProject) ideaModule "${rootProject.name}${project.path.replace ':', '.'}.main"

			// Recommended logging data for a userdev environment
			property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'

			// Recommended logging level for the console
			property 'forge.logging.console.level', 'debug'

			//noinspection GroovyAssignabilityCheck
			mods.create(modId) {
				//noinspection GroovyAssignabilityCheck
				source sourceSets.main
				afterEvaluate {
					// COMMENT add non-mod modules for correct classloading behavior
					configurations.runtimeClasspath.allDependencies.each { dependency ->
						if (dependency instanceof ProjectDependency) source((SourceSet) dependency.dependencyProject.sourceSets.main)
					}
				}
			}
		}

		//noinspection SpellCheckingInspection
		server {
			workingDirectory file(minecraftRunDir)
			if (project != rootProject) ideaModule "${rootProject.name}${project.path.replace ':', '.'}.main"

			// Recommended logging data for a userdev environment
			property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'

			// Recommended logging level for the console
			property 'forge.logging.console.level', 'debug'

			//noinspection GroovyAssignabilityCheck
			mods.create(modId) {
				//noinspection GroovyAssignabilityCheck
				source sourceSets.main
				afterEvaluate {
					// COMMENT add non-mod modules for correct classloading behavior
					configurations.runtimeClasspath.allDependencies.each { dependency ->
						if (dependency instanceof ProjectDependency) source((SourceSet) dependency.dependencyProject.sourceSets.main)
					}
				}
			}
		}

		//noinspection SpellCheckingInspection
		data {
			workingDirectory file(minecraftRunDir)
			if (project != rootProject) ideaModule "${rootProject.name}${project.path.replace ':', '.'}.main"

			// Recommended logging data for a userdev environment
			property 'forge.logging.markers', 'SCAN,REGISTRIES,REGISTRYDUMP'

			// Recommended logging level for the console
			property 'forge.logging.console.level', 'debug'

			args '--mod', modId, '--all', '--output', file('src/generated/resources/')

			//noinspection GroovyAssignabilityCheck
			mods.create(modId) {
				//noinspection GroovyAssignabilityCheck
				source sourceSets.main
				afterEvaluate {
					// COMMENT add non-mod modules for correct classloading behavior
					configurations.runtimeClasspath.allDependencies.each { dependency ->
						if (dependency instanceof ProjectDependency) source((SourceSet) dependency.dependencyProject.sourceSets.main)
					}
				}
			}
		}
	}
}

